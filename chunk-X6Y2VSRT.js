import{a as oe}from"./chunk-AYGNVWRE.js";import{$ as T,Bb as ee,D as m,Db as te,E as i,Eb as ie,F as o,G as E,H as h,I as C,J as s,N as c,O as w,P as v,Q as I,R as M,S as g,T as p,U as f,Y as b,Ya as F,Z as V,Za as D,bb as L,cb as N,db as O,eb as A,fb as j,gb as z,jb as H,mb as G,n as u,na as W,nb as q,o as _,ob as J,pa as k,pb as K,qb as Q,rb as R,u as a,ua as B,vb as U,w as P,wb as X,xb as Y,y,yb as Z,z as x,zb as $}from"./chunk-KFCX55XD.js";import"./chunk-24WMRY7Q.js";import"./chunk-QUJFQN2Y.js";import"./chunk-PPLOLVG2.js";import"./chunk-WRVDKWF6.js";import"./chunk-YGW4HXY5.js";import"./chunk-BMJVVMK5.js";import"./chunk-S6AMPHJZ.js";import"./chunk-EEG35UFA.js";import"./chunk-WBVABYLX.js";import"./chunk-UD3XTG5V.js";import"./chunk-FOFIWYID.js";import"./chunk-JOTLW5X2.js";import"./chunk-3PF4GKYE.js";import"./chunk-BLSTF7EF.js";import"./chunk-3IVKBF6N.js";import"./chunk-M2X7KQLB.js";import"./chunk-UIFIQKDK.js";import"./chunk-42C7ZIID.js";import"./chunk-C5RQ2IC2.js";import"./chunk-AJI4VUU4.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BKXINAYE.js";import"./chunk-CKP3SGE2.js";import"./chunk-XF2R5JSX.js";import{g as S}from"./chunk-2R6CW7ES.js";function ne(n,d){if(n&1){let e=h();i(0,"ion-item",10),C("click",function(){let t=u(e).$implicit,r=s(3);return _(r.seleccionarProducto(t))}),i(1,"ion-label")(2,"b"),c(3),o(),c(4),E(5,"br"),i(6,"span",11),c(7),o()()()}if(n&2){let e=d.$implicit;a(3),w(e.numeroSerie),a(),v(" - ",e.nombre),a(3),I("",e.marca," / ",e.familia)}}function re(n,d){if(n&1&&(i(0,"ion-list"),x(1,ne,8,4,"ion-item",9),o()),n&2){let e=s(2);a(),m("ngForOf",e.filtrarProductos())}}function ae(n,d){n&1&&(i(0,"div",12),E(1,"ion-icon",13),i(2,"h3"),c(3,"No se encontr\xF3 el producto"),o()())}function ce(n,d){n&1&&(i(0,"div",14),E(1,"ion-spinner",15),i(2,"p"),c(3,"Cargando productos..."),o()())}function le(n,d){if(n&1){let e=h();i(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),c(3,"Buscar producto por N\xB0 de serie"),o()(),i(4,"ion-card-content")(5,"ion-item")(6,"ion-label",5),c(7,"N\xB0 Serie"),o(),i(8,"ion-input",6),f("ngModelChange",function(t){u(e);let r=s();return p(r.filtroSerie,t)||(r.filtroSerie=t),_(t)}),o()(),x(9,re,2,1,"ion-list",4)(10,ae,4,0,"div",7)(11,ce,4,0,"div",8),o()()}if(n&2){let e=s();a(8),g("ngModel",e.filtroSerie),a(),m("ngIf",e.filtrarProductos().length>0),a(),m("ngIf",!e.loading&&e.filtrarProductos().length===0&&e.filtroSerie),a(),m("ngIf",e.loading)}}function de(n,d){if(n&1&&(i(0,"ion-select-option",24),c(1),o()),n&2){let e=d.$implicit;m("value",e.value),a(),w(e.label)}}function se(n,d){if(n&1){let e=h();i(0,"ion-item")(1,"ion-label",5),c(2,"Cliente"),o(),i(3,"ion-input",25),f("ngModelChange",function(t){u(e);let r=s(2);return p(r.cliente,t)||(r.cliente=t),_(t)}),o()()}if(n&2){let e=s(2);a(3),g("ngModel",e.cliente)}}function me(n,d){if(n&1){let e=h();i(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),c(3),o(),i(4,"ion-card-subtitle"),c(5),o()(),i(6,"ion-card-content")(7,"ion-item")(8,"ion-label",5),c(9,"Motivo de egreso"),o(),i(10,"ion-select",16),f("ngModelChange",function(t){u(e);let r=s();return p(r.motivo,t)||(r.motivo=t),_(t)}),i(11,"ion-select-option",17),c(12,"Selecciona motivo"),o(),x(13,de,2,2,"ion-select-option",18),o()(),x(14,se,4,1,"ion-item",4),i(15,"ion-item")(16,"ion-label",5),c(17,"N\xB0 Gu\xEDa de despacho"),o(),i(18,"ion-input",19),f("ngModelChange",function(t){u(e);let r=s();return p(r.guiaDespacho,t)||(r.guiaDespacho=t),_(t)}),o()(),i(19,"ion-item")(20,"ion-label",5),c(21,"Fecha de egreso"),o(),i(22,"ion-input",20),f("ngModelChange",function(t){u(e);let r=s();return p(r.fechaEgreso,t)||(r.fechaEgreso=t),_(t)}),o()(),i(23,"ion-item")(24,"ion-label",5),c(25,"Comentarios"),o(),i(26,"ion-textarea",21),f("ngModelChange",function(t){u(e);let r=s();return p(r.comentarios,t)||(r.comentarios=t),_(t)}),o()(),i(27,"ion-button",22),C("click",function(){u(e);let t=s();return _(t.egresarProducto())}),c(28," Egresar producto "),o(),i(29,"ion-button",23),C("click",function(){u(e);let t=s();return _(t.cancelar())}),c(30," Cancelar "),o()()()}if(n&2){let e=s();a(3),v("Egresar producto: ",e.productoSeleccionado.numeroSerie),a(2),M("",e.productoSeleccionado.nombre," (",e.productoSeleccionado.marca," / ",e.productoSeleccionado.familia,")"),a(5),g("ngModel",e.motivo),a(3),m("ngForOf",e.motivos),a(),m("ngIf",e.motivo==="Vendido"),a(4),g("ngModel",e.guiaDespacho),a(4),g("ngModel",e.fechaEgreso),a(4),g("ngModel",e.comentarios),a(),m("disabled",!e.motivo)}}var Ee=(()=>{let d=class d{constructor(l,t){this.productService=l,this.toastController=t,this.productos=[],this.filtroSerie="",this.productoSeleccionado=null,this.motivo="",this.cliente="",this.guiaDespacho="",this.fechaEgreso="",this.comentarios="",this.loading=!1,this.motivos=[{value:"Vendido",label:"Vendido"},{value:"Extraviado",label:"Extraviado"},{value:"Merma",label:"Merma"}]}ngOnInit(){this.cargarProductos(),this.fechaEgreso=new Date().toISOString().slice(0,10)}cargarProductos(){return S(this,null,function*(){this.loading=!0,this.productos=(yield this.productService.getProducts().toPromise())||[],this.loading=!1})}filtrarProductos(){return this.filtroSerie?this.productos.filter(l=>l.numeroSerie.toLowerCase().includes(this.filtroSerie.toLowerCase())):this.productos}seleccionarProducto(l){this.productoSeleccionado=l}cancelar(){this.productoSeleccionado=null,this.motivo="",this.cliente="",this.guiaDespacho="",this.fechaEgreso=new Date().toISOString().slice(0,10),this.comentarios=""}egresarProducto(){return S(this,null,function*(){this.mostrarToast("Producto egresado correctamente","success"),this.cancelar()})}mostrarToast(l,t){return S(this,null,function*(){yield(yield this.toastController.create({message:l,duration:2e3,color:t,position:"top"})).present()})}};d.\u0275fac=function(t){return new(t||d)(P(oe),P(te))},d.\u0275cmp=y({type:d,selectors:[["app-egreso-producto"]],decls:11,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],["position","stacked"],["placeholder","Buscar por n\xFAmero de serie",3,"ngModelChange","ngModel"],["class","empty-state",4,"ngIf"],["class","loading-container",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"subtle"],[1,"empty-state"],["name","cube-outline","size","large"],[1,"loading-container"],["name","crescent"],["interface","popover",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","N\xB0 gu\xEDa de despacho",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],["auto-grow","true","placeholder","Comentarios adicionales",3,"ngModelChange","ngModel"],["expand","block","color","danger",3,"click","disabled"],["expand","block","fill","clear","color","medium",3,"click"],[3,"value"],["placeholder","Nombre del cliente",3,"ngModelChange","ngModel"]],template:function(t,r){t&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),c(3,"Egreso de Producto"),o()()(),i(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),c(8,"Egreso de Producto"),o()()(),x(9,le,12,4,"ion-card",4)(10,me,31,11,"ion-card",4),o()),t&2&&(m("translucent",!0),a(4),m("fullscreen",!0),a(5),m("ngIf",!r.productoSeleccionado),a(),m("ngIf",r.productoSeleccionado))},dependencies:[T,b,V,ie,L,N,O,A,j,z,H,G,q,J,K,Q,R,U,X,Y,Z,$,ee,F,D,B,W,k],encapsulation:2});let n=d;return n})();export{Ee as EgresoProductoPage};
