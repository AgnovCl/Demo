import{a as X}from"./chunk-AYGNVWRE.js";import{$ as I,D as g,E as e,Eb as U,F as t,G as f,H as O,I as m,J as C,M as S,N as n,O as u,P as w,S as _,T as h,U as x,Y as F,Ya as j,Z as E,Za as A,bb as W,cb as N,ga as L,ib as V,lb as D,n as M,na as T,nb as B,o as b,ob as G,pa as z,pb as R,qb as q,sb as H,u as r,ua as k,vb as J,w as v,wb as K,xb as Q,y,z as P}from"./chunk-KFCX55XD.js";import"./chunk-24WMRY7Q.js";import"./chunk-QUJFQN2Y.js";import"./chunk-PPLOLVG2.js";import"./chunk-WRVDKWF6.js";import"./chunk-YGW4HXY5.js";import"./chunk-BMJVVMK5.js";import"./chunk-S6AMPHJZ.js";import"./chunk-EEG35UFA.js";import"./chunk-WBVABYLX.js";import"./chunk-UD3XTG5V.js";import"./chunk-FOFIWYID.js";import"./chunk-JOTLW5X2.js";import"./chunk-3PF4GKYE.js";import"./chunk-BLSTF7EF.js";import"./chunk-3IVKBF6N.js";import"./chunk-M2X7KQLB.js";import"./chunk-UIFIQKDK.js";import"./chunk-42C7ZIID.js";import"./chunk-C5RQ2IC2.js";import"./chunk-AJI4VUU4.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BKXINAYE.js";import"./chunk-CKP3SGE2.js";import"./chunk-XF2R5JSX.js";import"./chunk-2R6CW7ES.js";function Y(c,s){if(c&1&&(e(0,"ion-select-option",14),n(1),t()),c&2){let l=s.$implicit;g("value",l),r(),u(l)}}function Z(c,s){if(c&1&&(e(0,"ion-select-option",14),n(1),t()),c&2){let l=s.$implicit;g("value",l),r(),u(l)}}function $(c,s){c&1&&(e(0,"div",32),f(1,"ion-spinner",33),e(2,"p"),n(3,"Cargando productos..."),t()())}function ee(c,s){if(c&1){let l=O();e(0,"tr",34)(1,"td",35)(2,"strong"),n(3),t()(),e(4,"td",36),n(5),t(),e(6,"td"),n(7),t(),e(8,"td"),n(9),t(),e(10,"td")(11,"span",37),n(12),t()(),e(13,"td",38),n(14),t(),e(15,"td",38),n(16),t(),e(17,"td"),n(18),t(),e(19,"td",39)(20,"ion-button",40),m("click",function(){let d=M(l).$implicit,i=C();return b(i.viewProduct(d))}),f(21,"ion-icon",41),n(22," Ver "),t()()()}if(c&2){let l=s.$implicit,o=C();r(3),u(l.numeroSerie),r(2),u(l.nombre),r(2),u(l.familia),r(2),u(l.marca),r(2),S(o.getActivoFijoClass(l.activoFijo)),r(),w(" ",o.getActivoFijoText(l.activoFijo)," "),r(2),u(o.formatCurrency(l.costoNeto)),r(2),u(o.formatCurrency(l.precioVenta)),r(2),u(o.formatDate(l.fechaIngreso))}}function te(c,s){if(c&1){let l=O();e(0,"div",42)(1,"p"),n(2,"No se encontraron productos con los filtros aplicados."),t(),e(3,"ion-button",43),m("click",function(){M(l);let d=C();return b(d.clearFilters())}),n(4," Limpiar filtros "),t()()}}var pe=(()=>{let s=class s{constructor(o,d){this.productService=o,this.router=d,this.products=[],this.filteredProducts=[],this.familias=[],this.marcas=[],this.isLoading=!1,this.searchTerm="",this.selectedFamilia="",this.selectedMarca="",this.selectedActivoFijo=null,this.ordenarPor="nombre",this.orden="asc"}ngOnInit(){this.loadProducts(),this.loadFamilias(),this.loadMarcas()}loadProducts(){this.isLoading=!0,this.productService.getProducts().subscribe({next:o=>{this.products=o,this.applyFilters(),this.isLoading=!1},error:o=>{console.error("Error cargando productos:",o),this.isLoading=!1}})}loadFamilias(){this.productService.getFamilias().subscribe(o=>{this.familias=o})}loadMarcas(){this.productService.getMarcas().subscribe(o=>{this.marcas=o})}applyFilters(){let o={search:this.searchTerm,familia:this.selectedFamilia||void 0,marca:this.selectedMarca||void 0,activoFijo:this.selectedActivoFijo!==null?this.selectedActivoFijo:void 0,ordenarPor:this.ordenarPor,orden:this.orden};this.productService.getProducts(o).subscribe(d=>{this.filteredProducts=d})}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}onSortChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.selectedFamilia="",this.selectedMarca="",this.selectedActivoFijo=null,this.ordenarPor="nombre",this.orden="asc",this.applyFilters()}viewProduct(o){this.router.navigate(["/products",o.idProducto])}formatCurrency(o){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(o)}formatDate(o){return new Date(o).toLocaleDateString("es-CL")}getActivoFijoText(o){return o?"S\xED":"No"}getActivoFijoClass(o){return o?"activo-fijo":"no-activo-fijo"}};s.\u0275fac=function(d){return new(d||s)(v(X),v(L))},s.\u0275cmp=y({type:s,selectors:[["app-product-list"]],decls:95,vars:15,consts:[[1,"page-container"],[1,"section-header"],[1,"filters-section","ion-padding"],["lines","none",1,"search-box"],["name","search-outline","slot","start"],["placeholder","Buscar por nombre, n\xFAmero de serie, marca...","clearInput","",3,"ngModelChange","ionInput","ngModel"],[1,"filters-row"],["size","12","size-md","2"],["lines","none"],["interface","popover","placeholder","Todas las familias",3,"ngModelChange","ionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["interface","popover","placeholder","Todas las marcas",3,"ngModelChange","ionChange","ngModel"],["interface","popover","placeholder","Todos",3,"ngModelChange","ionChange","ngModel"],[3,"value"],["interface","popover",3,"ngModelChange","ionChange","ngModel"],["value","nombre"],["value","numeroSerie"],["value","fechaIngreso"],["value","precioVenta"],["value","asc"],["value","desc"],["size","12","size-md","2",1,"ion-text-end","ion-align-self-end"],["color","danger","fill","outline",3,"click"],["name","trash-outline","slot","start"],["class","loading",4,"ngIf"],[1,"products-table-container"],[1,"table-header"],[1,"table-responsive"],[1,"products-table"],["class","product-row",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],[1,"loading"],["name","crescent"],[1,"product-row"],[1,"serial-number"],[1,"product-name"],[1,"status-badge"],[1,"price"],[1,"actions"],["color","primary","size","small",3,"click"],["name","eye-outline","slot","start"],[1,"no-results"],["color","medium",3,"click"]],template:function(d,i){d&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),n(3,"\u{1F4E6} Lista de Productos"),t(),e(4,"p"),n(5,"Gestiona tu inventario individualizado por n\xFAmero de serie"),t()(),e(6,"ion-card",2)(7,"ion-item",3),f(8,"ion-icon",4),e(9,"ion-input",5),x("ngModelChange",function(a){return h(i.searchTerm,a)||(i.searchTerm=a),a}),m("ionInput",function(){return i.onSearch()}),t()(),e(10,"ion-grid",6)(11,"ion-row")(12,"ion-col",7)(13,"ion-item",8)(14,"ion-label"),n(15,"Familia"),t(),e(16,"ion-select",9),x("ngModelChange",function(a){return h(i.selectedFamilia,a)||(i.selectedFamilia=a),a}),m("ionChange",function(){return i.onFilterChange()}),e(17,"ion-select-option",10),n(18,"Todas las familias"),t(),P(19,Y,2,2,"ion-select-option",11),t()()(),e(20,"ion-col",7)(21,"ion-item",8)(22,"ion-label"),n(23,"Marca"),t(),e(24,"ion-select",12),x("ngModelChange",function(a){return h(i.selectedMarca,a)||(i.selectedMarca=a),a}),m("ionChange",function(){return i.onFilterChange()}),e(25,"ion-select-option",10),n(26,"Todas las marcas"),t(),P(27,Z,2,2,"ion-select-option",11),t()()(),e(28,"ion-col",7)(29,"ion-item",8)(30,"ion-label"),n(31,"Activo Fijo"),t(),e(32,"ion-select",13),x("ngModelChange",function(a){return h(i.selectedActivoFijo,a)||(i.selectedActivoFijo=a),a}),m("ionChange",function(){return i.onFilterChange()}),e(33,"ion-select-option",14),n(34,"Todos"),t(),e(35,"ion-select-option",14),n(36,"S\xED"),t(),e(37,"ion-select-option",14),n(38,"No"),t()()()(),e(39,"ion-col",7)(40,"ion-item",8)(41,"ion-label"),n(42,"Ordenar por"),t(),e(43,"ion-select",15),x("ngModelChange",function(a){return h(i.ordenarPor,a)||(i.ordenarPor=a),a}),m("ionChange",function(){return i.onSortChange()}),e(44,"ion-select-option",16),n(45,"Nombre"),t(),e(46,"ion-select-option",17),n(47,"N\xFAmero de Serie"),t(),e(48,"ion-select-option",18),n(49,"Fecha de Ingreso"),t(),e(50,"ion-select-option",19),n(51,"Precio de Venta"),t()()()(),e(52,"ion-col",7)(53,"ion-item",8)(54,"ion-label"),n(55,"Orden"),t(),e(56,"ion-select",15),x("ngModelChange",function(a){return h(i.orden,a)||(i.orden=a),a}),m("ionChange",function(){return i.onSortChange()}),e(57,"ion-select-option",20),n(58,"Ascendente"),t(),e(59,"ion-select-option",21),n(60,"Descendente"),t()()()(),e(61,"ion-col",22)(62,"ion-button",23),m("click",function(){return i.clearFilters()}),f(63,"ion-icon",24),n(64," Limpiar Filtros "),t()()()()(),P(65,$,4,0,"div",25),e(66,"ion-card",26)(67,"div",27)(68,"h3"),n(69),t()(),e(70,"div",28)(71,"table",29)(72,"thead")(73,"tr")(74,"th"),n(75,"N\xFAmero de Serie"),t(),e(76,"th"),n(77,"Nombre"),t(),e(78,"th"),n(79,"Familia"),t(),e(80,"th"),n(81,"Marca"),t(),e(82,"th"),n(83,"Activo Fijo"),t(),e(84,"th"),n(85,"Costo Neto"),t(),e(86,"th"),n(87,"Precio Venta"),t(),e(88,"th"),n(89,"Fecha Ingreso"),t(),e(90,"th"),n(91,"Acciones"),t()()(),e(92,"tbody"),P(93,ee,23,10,"tr",30),t()()(),P(94,te,5,0,"div",31),t()()),d&2&&(r(9),_("ngModel",i.searchTerm),r(7),_("ngModel",i.selectedFamilia),r(3),g("ngForOf",i.familias),r(5),_("ngModel",i.selectedMarca),r(3),g("ngForOf",i.marcas),r(5),_("ngModel",i.selectedActivoFijo),r(),g("value",null),r(2),g("value",!0),r(2),g("value",!1),r(6),_("ngModel",i.ordenarPor),r(13),_("ngModel",i.orden),r(9),g("ngIf",i.isLoading),r(4),w("Productos encontrados: ",i.filteredProducts.length),r(24),g("ngForOf",i.filteredProducts),r(),g("ngIf",i.filteredProducts.length===0&&!i.isLoading))},dependencies:[I,F,E,k,T,z,U,W,N,V,D,B,G,R,q,H,J,K,Q,j,A],styles:[".page-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.section-header[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center;background:var(--bg-primary);border-radius:var(--border-radius);box-shadow:var(--shadow-light);padding:2rem 1rem;border:1px solid var(--border-color)}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-primary);margin:0 0 8px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);margin:0}.filters-section[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--border-radius);box-shadow:var(--shadow-light);border:1px solid var(--border-color);margin-bottom:24px}.filters-row[_ngcontent-%COMP%]{width:100%}ion-item.search-box[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:var(--border-radius-sm);background:var(--bg-secondary);--background: var(--bg-secondary);--border-radius: var(--border-radius-sm);--padding-start: 8px;--padding-end: 8px}.filters-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: var(--bg-primary);--border-radius: 12px;--box-shadow: 0 2px 8px rgba(0,0,0,.06);--padding-start: 12px;--padding-end: 12px;--min-height: 48px;margin:0;border:1.5px solid #e0e0e0;box-shadow:0 2px 8px #0000000f;transition:box-shadow .2s;display:flex;align-items:center;min-height:48px;box-sizing:border-box}.filters-row[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:focus-within{box-shadow:0 4px 16px #667eea1f;border-color:var(--primary-color)}.filters-row[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:1 0 40%;margin-bottom:0;font-size:15px;font-weight:600;color:var(--text-primary)!important;--ion-text-color: var(--text-primary) !important}.filters-row[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], .filters-row[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{flex:2 1 60%;min-width:0;--padding-start: 0;--padding-end: 0;--ion-text-color: var(--text-primary) !important;color:var(--text-primary)!important}.filters-row[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::part(icon){color:var(--primary-color);font-size:22px}.filters-row[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px var(--primary-color)}.filters-row[_ngcontent-%COMP%]   ion-select-option[_ngcontent-%COMP%]{font-size:15px}.filters-row[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]::part(placeholder), .filters-row[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::part(placeholder){color:var(--text-muted)!important;opacity:1!important}ion-button[color=danger][_ngcontent-%COMP%]{margin-top:8px}.products-table-container[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:var(--border-radius);box-shadow:var(--shadow-light);border:1px solid var(--border-color);overflow:hidden;margin-bottom:32px}.table-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid var(--border-color);background:var(--bg-secondary)}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:18px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-secondary);padding:16px 12px;text-align:left;font-weight:600;color:var(--text-primary);border-bottom:2px solid var(--border-color);white-space:nowrap}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid var(--border-color);vertical-align:middle}.products-table[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.products-table[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary)}.products-table[_ngcontent-%COMP%]   .serial-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:13px;color:var(--primary-color)}.products-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary);max-width:200px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:13px;font-weight:600;background:#eafaf1;color:#27ae60}.status-badge.no-activo-fijo[_ngcontent-%COMP%]{background:#fdeaea;color:#e74c3c}ion-button[size=small][_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;font-size:14px}.no-results[_ngcontent-%COMP%]{text-align:center;padding:24px 0 16px;color:var(--text-secondary)}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin:0 auto 16px;color:var(--primary-color)}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:16px}@media (max-width: 1024px){.page-container[_ngcontent-%COMP%]{padding:16px}.filters-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.products-table[_ngcontent-%COMP%]{font-size:13px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.products-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.filters-section[_ngcontent-%COMP%]{padding:16px}.filters-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.table-responsive[_ngcontent-%COMP%]{font-size:12px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px;font-size:12px}.products-table[_ngcontent-%COMP%]   .serial-number[_ngcontent-%COMP%]{font-size:11px}.products-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{max-width:120px}}@media (max-width: 480px){.page-container[_ngcontent-%COMP%]{padding:12px}.section-header[_ngcontent-%COMP%]{margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.filters-section[_ngcontent-%COMP%]{padding:12px}.search-input[_ngcontent-%COMP%]{font-size:16px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 2px;font-size:11px}.products-table[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px}}[_nghost-%COMP%]     .filters-row ion-label, [_nghost-%COMP%]     .filters-row ion-select, [_nghost-%COMP%]     .filters-row ion-input, [_nghost-%COMP%]     .filters-row .native-input.sc-ion-input-md{color:var(--text-primary)!important;--ion-text-color: var(--text-primary) !important}"]});let c=s;return c})();export{pe as ProductListPage};
